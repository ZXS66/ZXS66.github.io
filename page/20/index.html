<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<title>时代残党</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="icon" href="/favicon.png">
<meta property="og:type" content="website">
<meta property="og:title" content="时代残党">
<meta property="og:url" content="https://zxs66.github.io/page/20/">
<meta property="og:site_name" content="时代残党">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="时代残党">
<meta property="article:tag" content="C#">
<meta property="article:tag" content="Angular">
<meta property="article:tag" content="NodeJS">
<meta property="article:tag" content="SQL">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="ASP.NET">
<meta property="article:tag" content="Full Stack">
<meta name="twitter:card" content="summary">
<link rel="dns-prefetch" href="https://cdn.bootcdn.net/">
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://fonts.gstatic.com/">
<meta name="baidu-site-verification" content="1W34rVIdAO" />

<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous" integrity="sha256-eZrrJcwDc&#x2F;3uDhsdt61sL2oOBY362qM3lon1gyExkL0&#x3D; sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN sha512-SfTiTlX6kk+qitfevl&#x2F;7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+&#x2F;Sw&#x3D;&#x3D;">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" />


<link rel="stylesheet" href="/css/style.css">

<link rel="manifest" href="/manifest.json">
<script type="module" src="/pwabuilder-sw-register.js"></script>
<!-- 百度统计 -->
<script>
var _hmt = _hmt || [];
(function () {
var hm = document.createElement("script");
hm.src = "https://hm.baidu.com/hm.js?de1c4b02a9f8a51a6001797e045d3af9";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();
</script>
</head><body>
<div id="container">
<div id="wrap">
<header id="header">
<div id="banner"></div>
<div id="header-outer" class="outer">
<div id="header-title" class="inner">
<h1 id="logo-wrap">
<a href="/" id="logo">时代残党</a>
</h1>

<h2 id="subtitle-wrap">
<a href="/" id="subtitle">随手笔记</a>
</h2>

</div>
<div id="header-inner" class="inner">
<nav id="main-nav">
<a id="main-nav-toggle" class="nav-icon"></a>

<a class="main-nav-link" href="/">首页</a>

<a class="main-nav-link" href="/archives">归档</a>

<a class="main-nav-link" href="/app">联系我</a>

</nav>
<div id="search-form-wrap">
<div class="search-form"><input type="search" name="wd" class="search-form-input" placeholder="Search" list="search-datalist" autocomplete="false"/></div>

<input type="hidden" id="search-index-file" value="/search.json" />
<div id="search-form-datalist"></div>

</div>
<nav id="sub-nav">

<a id="nav-search-btn" class="nav-icon" title="搜索"></a>
</nav>
</div>
</div>
</header>
<div class="outer">
<section id="main">


<article id="post-reliable-CDN" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2020/07/19/reliable-CDN/" class="article-date">
  <time datetime="2020-07-19T07:40:45.000Z" itemprop="datePublished">2020-07-19</time>
</a>

</div>
<div class="article-inner">


<header class="article-header">
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/19/reliable-CDN/">可靠 CDN</a>
    </h1>
  
</header>

<div class="article-entry" itemprop="articleBody">
<p>前几天，把博客的 <a href="https://fontawesome.com/" target="_blank" rel="noopener">font-awesome</a> 引用从博客站点本身切换到 CDN。图省事，就用了以前国内外通用的 <a href="https://www.cloudflare.com/zh-cn/network/china/" target="_blank" rel="noopener">cloudflare</a>，因为之前不管是在公司（外网），还是在家里（国内），访问都挺快的。然后，就出事了。。。</p>
<p>今天在家，闲来没事，打开自己的博客，发现 font-awesome 加载不了。起初，我以为是浏览器问题，因为我用 Firefox 有时候能正常渲染 icon font，过一会儿刷新一下又不能了，但是我用 Chrome 一直都可以正常工作。</p>
<p>去网上搜索一圈，发现 MDN 说：</p>
<blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener"><i class="fa fa-link" aria-hidden="true"></i></a> Web Fonts (for cross-domain font usage in @font-face within CSS), so that servers can deploy TrueType fonts that can only be cross-site loaded and used by web sites that are permitted to do so. </p>
</blockquote>
<blockquote>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener"><i class="fa fa-link" aria-hidden="true"></i></a> Fonts applied with @font-face. Some browsers allow cross-origin fonts, others require same-origin. </p>
</blockquote>
<p>发生跨域了？废话，用 CDN 肯定要跨域啊。但这些应该都是正常操作，Chrome 都行。emmm，Firefox 你在作妖吗。MDN 说的 others，该不会说的就是它自己吧。。。</p>
<p>查证一下 <a href="https://caniuse.com/#feat=fontface" target="_blank" rel="noopener">Can I use</a>：</p>
<p><img src="/images/reliable-cdn/caniuse%20font%20face%20web%20fonts.jpg" alt=""></p>
<p>只要服务器支持 CORS 浏览器就没问题！<a href="http://cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html" target="_blank" rel="noopener">这篇文章</a> 遇到的问题也是这样。</p>
<p>不会吧，CDN 不支持 CORS 那 CDN 要怎么用，cloudflare 肯定是支持 CORS 的！</p>
<p>再回头对比一下，我发现是 Firefox 请求字体文件出错时，发送的请求，是不带 HTTP 版本号的。</p>
<p><img src="/images/reliable-cdn/firefox%20cert%20invalid.jpg" alt="firefox 请求字体文件不带版本号"></p>
<p>而正常请求是指定了 HTTP 版本号的：</p>
<p><img src="/images/reliable-cdn/firefox%20working.jpg" alt="firefox 正常请求字体"></p>
<p>但是偶然又有一次带了版本号依然无法请求资源</p>
<p><img src="/images/reliable-cdn/firefox%20cert%20invalid%204.jpg" alt="firefox 请求字体文件不带版本号"></p>
<p>什么鬼，你耍我？ <img src="/images/reliable-cdn/questions.png" alt="？？？"> </p>
<p>莫非，真的是 CDN 问题？我查查…</p>
<p>好家伙，还真有问题！<a href="https://segmentfault.com/a/1190000023290310" target="_blank" rel="noopener">Cloudflare DNS 服务中断，大量网站和服务无法访问</a> </p>
<p>虽然文中并未提及国内是否受波及，但为什么我受影响了？我去 <a href="https://www.cloudflarestatus.com/" target="_blank" rel="noopener">官网</a> 看看。官网说了</p>
<blockquote>
<p>All Systems Operational</p>
</blockquote>
<p>所有节点均正常？你确定？然后，我发现，7月17号，也就是前天有一个 incident</p>
<blockquote>
<h2 id="Cloudflare-Network-and-Resolver-Issues"><a href="#Cloudflare-Network-and-Resolver-Issues" class="headerlink" title="Cloudflare Network and Resolver Issues"></a>Cloudflare Network and Resolver Issues</h2><p>Resolved - This incident has been resolved.<br>Jul 17, 22:57 UTC<br>Monitoring - A fix has been implemented and we are monitoring the results.<br>Jul 17, 22:34 UTC<br>Update - This afternoon we saw an outage across some parts of our network. It was not as a result of an attack. It appears a router on our global backbone announced bad routes and caused some portions of the network to not be available. We believe we have addressed the root cause and are monitoring systems for stability now.<br>Jul 17, 22:09 UTC</p>
</blockquote>
<p>嘶<del>~</del> 有点不靠谱的感觉。没人攻击您，后台路由出问题了？</p>
<p>稍等，我之前好像看见，cloudflare 国内是和百度云合作的？嘶<del>~</del> （不吹不黑，只是个人不喜欢太商业化的东西）</p>
<p>拜拜咯，cloudflare！下载一个 js 和 css 文件都这么慢，还不如直接使用自己站点资源 🤦‍</p>
<p><img src="/images/reliable-cdn/firefox%20cert%20invalid%202.jpg" alt="firefox 请求 css 文件"><br><img src="/images/reliable-cdn/firefox%20cert%20invalid%203.jpg" alt="firefox 请求 js 文件"></p>
<p>既然不用 cloudflare，那换谁呢？简单搜索了一下，目前看起来，bootcdn 还不错，行，安排！！</p>
<p>刷刷刷，搞定！</p>
<p>firefox 打开，正常！</p>

</div>
<footer class="article-footer">
<a data-url="https://zxs66.github.io/2020/07/19/reliable-CDN/" data-id="clbrr63hw00cjm08c9cwv4qqo" data-title="可靠 CDN" class="article-share-link">分享</a>


  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/baidu/" rel="tag">baidu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cdn/" rel="tag">cdn</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloudflare/" rel="tag">cloudflare</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firefox/" rel="tag">firefox</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iconfont/" rel="tag">iconfont</a></li></ul>

</footer>
</div>

</article>



<article id="post-get-started-with-Flutter" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2020/07/18/get-started-with-Flutter/" class="article-date">
  <time datetime="2020-07-18T07:10:21.000Z" itemprop="datePublished">2020-07-18</time>
</a>

</div>
<div class="article-inner">


<header class="article-header">
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/18/get-started-with-Flutter/">Flutter 入门</a>
    </h1>
  
</header>

<div class="article-entry" itemprop="articleBody">
<h2 id="为什么要学-Flutter？"><a href="#为什么要学-Flutter？" class="headerlink" title="为什么要学 Flutter？"></a>为什么要学 Flutter？</h2><ul>
<li>提升技能。移动端 skillset √ ，全栈开发 √</li>
<li>Flutter 是趋势。“<em>Google 出品，必是精品！</em>”</li>
<li>React Native 不感冒</li>
</ul>
<h2 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h2><ul>
<li><a href="https://flutter.dev/" target="_blank" rel="noopener">Flutter</a> <em>【Flutter 官网】</em></li>
<li><a href="https://flutter.cn/" target="_blank" rel="noopener">Flutter 中文社区</a> <em>【Flutter 官网（中文）】</em></li>
<li><a href="https://dart.cn/guides/language/language-tour" target="_blank" rel="noopener">Dart 开发语言概览</a> <em>【1小时入门 Dart】</em></li>
<li><a href="https://codelabs.flutter-io.cn/" target="_blank" rel="noopener">Flutter Codelabs</a> <em>【更多入门案例】</em></li>
<li><a href="https://www.yuque.com/xytech/flutter/aqsvov" target="_blank" rel="noopener">重磅|庖丁解牛之——Flutter for Web · 语雀</a> <em>【咸鱼出品】</em></li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>因为本来就打算尝试 Flutter for Web，而此功能目前还处于 beta 分支，所以下载 <code>xxxx-stable.zip</code> 安装包基本没用，最终还是需要切换分支，重新更新。所以，以下是我的安装方法：</p>
<h5 id="1-从-GitHub-上下载最新-beta-分支-git-clone"><a href="#1-从-GitHub-上下载最新-beta-分支-git-clone" class="headerlink" title="1. 从 GitHub 上下载最新 beta 分支 (git clone)"></a>1. 从 GitHub 上下载最新 beta 分支 (git clone)</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/flutter/flutter.git -b beta</span><br></pre></td></tr></table></figure>

<h5 id="2-更新环境变量"><a href="#2-更新环境变量" class="headerlink" title="2. 更新环境变量 "></a>2. 更新环境变量 <a href="https://flutter.cn/docs/get-started/install/windows" target="_blank" rel="noopener"><fa-link/></a></h5><p>将 <code>flutter\bin</code> 添加至环境变量 <code>PATH</code>。Linux 和 Mac 用户命令行搞定：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH="$PWD/flutter/bin:$PATH"</span><br></pre></td></tr></table></figure>

<p>Windows 用户可以选择鼠标点点，更改环境变量 （我的电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量-&gt;用户变量）</p>
<h5 id="3-配置-flutter-使用镜像站点"><a href="#3-配置-flutter-使用镜像站点" class="headerlink" title="3. 配置 flutter 使用镜像站点 "></a>3. 配置 flutter 使用镜像站点 <a href="https://flutter.cn/docs/get-started/install/windows" target="_blank" rel="noopener"><fa-link/></a></h5><p>Flutter 官方站点 (<a href="https://flutter.dev" target="_blank" rel="noopener">https://flutter.dev</a>) 是在境外，被小镇禁止访问了，所以，此步骤是小镇用户需要做的额外操作。</p>
<p>类似于第二步，不同的是，这一步更改的是 <code>PUB_HOSTED_URL</code> 和 <code>FLUTTER_STORAGE_BASE_URL</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line">export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br></pre></td></tr></table></figure>

<p>当然，Flutter 镜像站点，除了 Flutter 中文社区 <code>flutter-io.cn</code> 这一个，还有另外两个，如果觉得这个主站点慢，可以随时切换：</p>
<ul>
<li>上海交通大学软件源镜像服务</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FLUTTER_STORAGE_BASE_URL: https://mirrors.sjtug.sjtu.edu.cn/</span><br><span class="line">export PUB_HOSTED_URL: https://dart-pub.mirrors.sjtug.sjtu.edu.cn/</span><br></pre></td></tr></table></figure>

<ul>
<li>清华大学开源软件镜像站</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export FLUTTER_STORAGE_BASE_URL: https://mirrors.tuna.tsinghua.edu.cn/flutter</span><br><span class="line">export PUB_HOSTED_URL: https://mirrors.tuna.tsinghua.edu.cn/dart-pub</span><br></pre></td></tr></table></figure>

<h5 id="4-初始化"><a href="#4-初始化" class="headerlink" title="4. 初始化 "></a>4. 初始化 <a href="https://flutter.cn/docs/get-started/web" target="_blank" rel="noopener"><fa-link/></a></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter channel beta</span><br><span class="line">flutter upgrade</span><br><span class="line">flutter config --enable-web</span><br></pre></td></tr></table></figure>
<p><em>备注：初始化过程中，可能会遇到下载失败问题，这时候可以参照第三步骤，切换镜像站点，并检查您此时的网络链接是否可以访问到镜像站点</em></p>
<h5 id="5-验证安装"><a href="#5-验证安装" class="headerlink" title="5. 验证安装 "></a>5. 验证安装 <a href="https://flutter.cn/docs/get-started/web" target="_blank" rel="noopener"><fa-link/></a></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flutter devices</span><br><span class="line">flutter doctor</span><br></pre></td></tr></table></figure>

<p><img src="/images/flutter/flutter%20doctor%20no%20issues%20found.jpg" alt="install successfully"></p>
<p>如果 <code>flutter devices</code> 书出一个名为 Chrome 的设备信息，则表示所有的安装、配置均完成。</p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello, World! "></a>Hello, World! <a href="https://flutter.cn/docs/get-started/web" target="_blank" rel="noopener"><fa-link/></a></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flutter create testflutter</span><br><span class="line">cd testflutter</span><br><span class="line">flutter run -d chrome --web-hostname=127.0.0.1</span><br></pre></td></tr></table></figure>

<p>打开 Chrome 浏览器，访问站点</p>
<p><img src="/images/flutter/flutter%20run.png" alt="flutter run -d chrome --web-hostname=127.0.0.1"></p>
<h2 id="编译、部署"><a href="#编译、部署" class="headerlink" title="编译、部署 "></a>编译、部署 <a href="https://flutter.cn/docs/deployment/web" target="_blank" rel="noopener"><fa-link/></a></h2><p>编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter build web</span><br></pre></td></tr></table></figure>

<p>部署：随便找个站点挂挂，本地的，或者云上的。</p>
<p><img src="/images/flutter/flutter%20build%20web.png" alt="flutter build web"></p>
<p>🎉🎉🎉 完美，算是迈出了第一步了！接下来就是找个练手项目，积攒经验值了。</p>

</div>
<footer class="article-footer">
<a data-url="https://zxs66.github.io/2020/07/18/get-started-with-Flutter/" data-id="clbrr63g1002em08c68f9dul0" data-title="Flutter 入门" class="article-share-link">分享</a>


  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/flutter/" rel="tag">flutter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/get-started/" rel="tag">get started</a></li></ul>

</footer>
</div>

</article>



<article id="post-share-to-WeChat-QQ-and-weibo" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2020/07/15/share-to-WeChat-QQ-and-weibo/" class="article-date">
  <time datetime="2020-07-15T15:31:43.000Z" itemprop="datePublished">2020-07-15</time>
</a>

</div>
<div class="article-inner">


<header class="article-header">
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/15/share-to-WeChat-QQ-and-weibo/">微信、微博、QQ一键分享</a>
    </h1>
  
</header>

<div class="article-entry" itemprop="articleBody">
<p>Hexo 默认的主题 Landscape，默认支持分享到 <i class="fa fa-twitter" aria-hidden="true"></i> Twitter、<i class="fa fa-facebook-square" aria-hidden="true"></i> Facebook、<i class="fa fa-pinterest" aria-hidden="true"></i> Pinterest、<i class="fa fa-linkedin-square" aria-hidden="true"></i> Linkedin 等国外社交媒体。但是，众所周知，这些社交媒体，在镇上都被🈲了！！</p>
<p>所以，这篇文章介绍如何将 Hexo 主题本地化，以支持 <i class="fa fa-weibo" aria-hidden="true"></i> 微博、<i class="fa fa-wechat" aria-hidden="true"></i> 微信、<i class="fa fa-qq" aria-hidden="true"></i> QQ 及 <i class="fa fa-envelope-o" aria-hidden="true"></i> 邮件分享。</p>
<h2 id="替换文章分享生成脚本"><a href="#替换文章分享生成脚本" class="headerlink" title="替换文章分享生成脚本"></a>替换文章分享生成脚本</h2><p>大概位置从第 60 行开始，替换原来的 Twitter、Facebook、Pinterest、Linkedin 模板，用以下代码：</p>
<p>文件：<code>themes\landscape\source\js\script.jsthemes\landscape\source\js\script.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Share</span></span><br><span class="line">$(<span class="string">"body"</span>)</span><br><span class="line">  .on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">".article-share-box.on"</span>).removeClass(<span class="string">"on"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .on(<span class="string">"click"</span>, <span class="string">".article-share-link"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.stopPropagation();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>),</span><br><span class="line">      url = $<span class="keyword">this</span>.attr(<span class="string">"data-url"</span>),</span><br><span class="line">      title = <span class="string">"👍 //"</span> + $<span class="keyword">this</span>.attr(<span class="string">"data-title"</span>),</span><br><span class="line">      encodedUrl = <span class="built_in">encodeURIComponent</span>(url),</span><br><span class="line">      encodedTitle = <span class="built_in">encodeURIComponent</span>(title),</span><br><span class="line">      id = <span class="string">"article-share-box-"</span> + $<span class="keyword">this</span>.attr(<span class="string">"data-id"</span>),</span><br><span class="line">      offset = $<span class="keyword">this</span>.offset();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="string">"#"</span> + id).length) &#123;</span><br><span class="line">      <span class="keyword">var</span> box = $(<span class="string">"#"</span> + id);</span><br><span class="line">      <span class="keyword">if</span> (box.hasClass(<span class="string">"on"</span>)) &#123;</span><br><span class="line">        box.removeClass(<span class="string">"on"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> html = [</span><br><span class="line">        <span class="string">'&lt;div id="'</span> + id + <span class="string">'" class="article-share-box"&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;input class="article-share-input" value="'</span> + url + <span class="string">'" readonly&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;div class="article-share-links"&gt;'</span>,</span><br><span class="line">        <span class="comment">// 微博分享</span></span><br><span class="line">        <span class="string">'&lt;a href="http://service.weibo.com/share/share.php?title='</span> +</span><br><span class="line">          encodedTitle +</span><br><span class="line">          <span class="string">"&amp;url="</span> +</span><br><span class="line">          encodedUrl +</span><br><span class="line">          <span class="string">'" class="article-share-weibo" target="_blank" title="微博分享"&gt;&lt;/a&gt;'</span>,</span><br><span class="line">        <span class="comment">// 微信二维码分享</span></span><br><span class="line">        <span class="string">'&lt;a href="https://zixuephp.net/inc/qrcode_img.php?url='</span> +</span><br><span class="line">          encodedUrl +</span><br><span class="line">          <span class="string">'" class="article-share-wechat" target="_blank" title="微信分享"&gt;&lt;/a&gt;'</span>,</span><br><span class="line">        <span class="comment">// QQ 好友分享</span></span><br><span class="line">        <span class="string">'&lt;a href="https://connect.qq.com/widget/shareqq/index.html?url='</span> +</span><br><span class="line">          encodedUrl +</span><br><span class="line">          <span class="string">"&amp;sharesource=qzone&amp;title="</span> +</span><br><span class="line">          encodedTitle +</span><br><span class="line">          <span class="string">'" class="article-share-qq" target="_blank" title="分享给QQ好友"&gt;&lt;/a&gt;'</span>,</span><br><span class="line">        <span class="comment">// 邮件分享</span></span><br><span class="line">        <span class="string">'&lt;a href="mailto:your@mail.com?subject='</span> +</span><br><span class="line">          encodedTitle +</span><br><span class="line">          <span class="string">"&amp;body="</span> +</span><br><span class="line">          encodedUrl +</span><br><span class="line">          <span class="string">'" class="article-share-mail" target="_blank" title="邮件分享"&gt;&lt;/a&gt;'</span>,</span><br><span class="line">        <span class="string">"&lt;/div&gt;"</span>,</span><br><span class="line">        <span class="string">"&lt;/div&gt;"</span></span><br><span class="line">      ].join(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> box = $(html);</span><br><span class="line">      $(<span class="string">"body"</span>).append(box);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">".article-share-box.on"</span>).hide();</span><br><span class="line"></span><br><span class="line">    box</span><br><span class="line">      .css(&#123;</span><br><span class="line">        top: offset.top + <span class="number">25</span>,</span><br><span class="line">        left: offset.left</span><br><span class="line">      &#125;)</span><br><span class="line">      .addClass(<span class="string">"on"</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">/// more click events here</span></span><br></pre></td></tr></table></figure>

<h2 id="更改配置"><a href="#更改配置" class="headerlink" title="更改配置"></a>更改配置</h2><p>（此步骤可省略，可用于 Contact 页面）</p>
<p>大概从第 30 行开始，增加 <code>weibo</code>、<code>wechat</code>、<code>qq</code>、<code>mail</code> 配置项</p>
<p>文件：<code>_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Miscellaneous</span></span><br><span class="line"><span class="attr">weibo:</span> <span class="string">your</span> <span class="string">weibo</span> <span class="string">name</span></span><br><span class="line"><span class="attr">wechat:</span> <span class="string">your</span> <span class="string">wechat</span> <span class="string">name</span></span><br><span class="line"><span class="attr">qq:</span> <span class="string">your</span> <span class="string">QQ</span></span><br><span class="line"><span class="attr">mail:</span> <span class="string">your</span> <span class="string">email</span></span><br></pre></td></tr></table></figure>

<h2 id="更改文章模板文件"><a href="#更改文章模板文件" class="headerlink" title="更改文章模板文件"></a>更改文章模板文件</h2><p>大概从第 26 行开始，增加 <code>data-title</code> 属性绑定</p>
<p>文件：<code>themes\landscape\layout\_partial\article.ejs</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;footer class&#x3D;&quot;article-footer&quot;&gt;</span><br><span class="line">  &lt;a data-url&#x3D;&quot;&lt;%- post.permalink %&gt;&quot; data-id&#x3D;&quot;&lt;%&#x3D; post._id %&gt;&quot; data-title&#x3D;&quot;&lt;%&#x3D; post.title %&gt;&quot; class&#x3D;&quot;article-share-link&quot;&gt;&lt;%&#x3D; __(&#39;share&#39;) %&gt;&lt;&#x2F;a&gt;</span><br><span class="line">  &lt;% if (post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt;</span><br><span class="line">  &lt;a href&#x3D;&quot;&lt;%- post.permalink %&gt;#disqus_thread&quot; class&#x3D;&quot;article-comment-link&quot;&gt;&lt;%&#x3D; __(&#39;comment&#39;) %&gt;&lt;&#x2F;a&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  &lt;%- partial(&#39;post&#x2F;tag&#39;) %&gt;</span><br><span class="line">&lt;&#x2F;footer&gt;</span><br></pre></td></tr></table></figure>

<h2 id="配置文章分享样式"><a href="#配置文章分享样式" class="headerlink" title="配置文章分享样式"></a>配置文章分享样式</h2><p>大概从第 273 行开始，添加一下样式</p>
<p>文件：<code>themes\landscape\layout\_partial\article.styl</code></p>
<figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">.article-share-weibo</span><br><span class="line">  @extend <span class="variable">$article</span>-share-link</span><br><span class="line">  &amp;:before</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\f18a"</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">background</span>: color-weibo</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> darken(color-weibo, <span class="number">20%</span>)</span><br><span class="line"></span><br><span class="line">.article-share-qq</span><br><span class="line">  @extend <span class="variable">$article</span>-share-link</span><br><span class="line">  &amp;:before</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\f1d6"</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">background</span>: color-qq</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> darken(color-qq, <span class="number">20%</span>)</span><br><span class="line"></span><br><span class="line">.article-share-wechat</span><br><span class="line">  @extend <span class="variable">$article</span>-share-link</span><br><span class="line">  &amp;:before</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\f1d7"</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">background</span>: color-wechat</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> darken(color-wechat, <span class="number">20%</span>)</span><br><span class="line">    </span><br><span class="line">.article-share-mail</span><br><span class="line">  @extend <span class="variable">$article</span>-share-link</span><br><span class="line">  &amp;:before</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"\f003"</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">background</span>: color-mail</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">1px</span> darken(color-mail, <span class="number">20%</span>)</span><br></pre></td></tr></table></figure>

<h2 id="更改变量"><a href="#更改变量" class="headerlink" title="更改变量"></a>更改变量</h2><p>大概从第 5 行开始</p>
<p>文件：<code>themes\landscape\source\css\_variables.styl</code></p>
<figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Colors</span></span><br><span class="line"><span class="attribute">color</span>-default = <span class="number">#555</span></span><br><span class="line"><span class="attribute">color</span>-grey = <span class="number">#999</span></span><br><span class="line"><span class="attribute">color</span>-border = <span class="number">#ddd</span></span><br><span class="line"><span class="attribute">color</span>-link = <span class="number">#258fb8</span></span><br><span class="line"><span class="attribute">color</span>-background = <span class="number">#eee</span></span><br><span class="line"><span class="attribute">color</span>-sidebar-text = <span class="number">#777</span></span><br><span class="line"><span class="attribute">color</span>-widget-background = <span class="number">#ddd</span></span><br><span class="line"><span class="attribute">color</span>-widget-border = <span class="number">#ccc</span></span><br><span class="line"><span class="attribute">color</span>-footer-background = <span class="number">#262a30</span></span><br><span class="line"><span class="attribute">color</span>-mobile-nav-background = <span class="number">#191919</span></span><br><span class="line"><span class="attribute">color</span>-weibo = <span class="number">#ff8140</span></span><br><span class="line"><span class="attribute">color</span>-wechat = <span class="number">#1aad19</span></span><br><span class="line"><span class="attribute">color</span>-qq = <span class="number">#00aced</span></span><br><span class="line"><span class="attribute">color</span>-mail = <span class="number">#a2e65b</span></span><br></pre></td></tr></table></figure>

<h2 id="升级-iconfont-版本"><a href="#升级-iconfont-版本" class="headerlink" title="升级 iconfont 版本"></a>升级 iconfont 版本</h2><p>Hexo 默认使用 <a href="http://www.fontawesome.com.cn/" target="_blank" rel="noopener">fontawesome</a> 作为 iconfont，如果您的 fontawesome 版本过低，请升级到至少 4.1，因为 <a href="http://www.fontawesome.com.cn/icons/qq/" target="_blank" rel="noopener">qq</a> 和 <a href="http://www.fontawesome.com.cn/icons/wechat/" target="_blank" rel="noopener">wechat</a> 图标是从 4.1 开始才收录的。我的升级方法，简单粗暴，就是下载最新的 iconfont，替换 <code>themes\landscape\source\css\fonts</code> 下的相关字体文件。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://zixuephp.net/article-309.html" target="_blank" rel="noopener">一键分享到QQ空间、QQ好友、新浪微博、微信代码</a></li>
<li><i class="fa fa-github" aria-hidden="true"></i> <a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" rel="noopener">hexojs/hexo-theme-landscape</a></li>
</ul>

</div>
<footer class="article-footer">
<a data-url="https://zxs66.github.io/2020/07/15/share-to-WeChat-QQ-and-weibo/" data-id="clbrr63hp00c8m08cfkq244cw" data-title="微信、微博、QQ一键分享" class="article-share-link">分享</a>


  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javaScript/" rel="tag">javaScript</a></li></ul>

</footer>
</div>

</article>




<nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/19/">&lt; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/21/">下一页 &gt;</a>
</nav>

<style>
.article {max-height: 123vh;overflow: hidden;position: relative;}
.article.unfold {max-height: initial;}
.article .more {position: absolute;bottom: 0;padding: 3em;cursor: pointer;text-align: center;width: 100%;background: linear-gradient(rgba(0, 0, 0, 0), silver);color: white;box-sizing: border-box;}
.article.unfold .more {display: none;}
</style>
<script>
(function () {
// show more
const moreText = '<i class="fa fa-arrow-circle-down" aria-hidden="true"></i> ' + "更多";
const articles = document.getElementsByClassName('article');
for (let i = 0; i < articles.length; i++) {
const $more = document.createElement('div');
$more.classList.add('more');$more.innerHTML = moreText;
$more.onclick = function (evt) {
const $src = evt.target || evt.srcElement;$src.parentElement.classList.add('unfold');
};
articles[i].appendChild($more);
}})();
</script>
</section>

</div>
<footer id="footer">

<div class="outer"><div id="footer-info" class="inner">&copy; 2022 时代残党<br>
Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div>
</div></footer>
</div>
<nav id="mobile-nav">

<a href="/" class="mobile-nav-link">home</a>

<a href="/archives" class="mobile-nav-link">archives</a>

<a href="/app" class="mobile-nav-link">contact</a>

</nav>
<!--

<script src="https://cdn.bootcdn.net/ajax/libs/jquery/2.0.3/jquery.min.js" crossorigin="anonymous" integrity="sha256-pXtSQrmprcTB74RsNlFHuJxHK5zXcPrOMx78uWU0ayU&#x3D; sha384-ECTndYny330R2jlSXBiZkdXzAVi0Z&#x2F;iDXJTwV6cp39HECmalqg6+b2sFZFf&#x2F;Y2m6 sha512-epzJ9ms+0Pq+zFMrG1lXVNvjEXgtfKx9iuEWqz3hmbaU2m&#x2F;Dp1pcmpYzuSdDLqX6PMIjzMOyGFwMc+SkgFhMFg&#x3D;&#x3D;"></script>

-->

<script src="/js/script.js" async></script>

</div>
<script>
(function () {
// append image-caption
const images = document.querySelectorAll('article img');
for (let j = 0; j < images.length; j++) {
const $img = images[j];
const altText = $img.getAttribute('alt');
if (altText && altText.length && !$img.classList.contains('inline')) {
const $imgCaption = document.createElement('div');
$imgCaption.classList.add('img-caption');
$imgCaption.innerText = $img.getAttribute('alt');
$img.parentNode.insertBefore($imgCaption, $img.nextSibling);
}}})();
</script>
</body></html>