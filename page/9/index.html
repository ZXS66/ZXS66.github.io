<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<title>æ—¶ä»£æ®‹å…š</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="icon" href="/favicon.png">
<meta property="og:type" content="website">
<meta property="og:title" content="æ—¶ä»£æ®‹å…š">
<meta property="og:url" content="https://zxs66.github.io/page/9/">
<meta property="og:site_name" content="æ—¶ä»£æ®‹å…š">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="æ—¶ä»£æ®‹å…š">
<meta property="article:tag" content="C#">
<meta property="article:tag" content="Angular">
<meta property="article:tag" content="NodeJS">
<meta property="article:tag" content="SQL">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="ASP.NET">
<meta property="article:tag" content="Full Stack">
<meta name="twitter:card" content="summary">
<link rel="dns-prefetch" href="https://cdn.bootcdn.net/">
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://fonts.gstatic.com/">
<meta name="baidu-site-verification" content="1W34rVIdAO" />

<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous" integrity="sha256-eZrrJcwDc&#x2F;3uDhsdt61sL2oOBY362qM3lon1gyExkL0&#x3D; sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN sha512-SfTiTlX6kk+qitfevl&#x2F;7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+&#x2F;Sw&#x3D;&#x3D;">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro" />


<link rel="stylesheet" href="/css/style.css">

<link rel="manifest" href="/manifest.json">
<script type="module" src="/pwabuilder-sw-register.js"></script>
<!-- ç™¾åº¦ç»Ÿè®¡ -->
<script>
var _hmt = _hmt || [];
(function () {
var hm = document.createElement("script");
hm.src = "https://hm.baidu.com/hm.js?de1c4b02a9f8a51a6001797e045d3af9";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();
</script>
</head><body>
<div id="container">
<div id="wrap">
<header id="header">
<div id="banner"></div>
<div id="header-outer" class="outer">
<div id="header-title" class="inner">
<h1 id="logo-wrap">
<a href="/" id="logo">æ—¶ä»£æ®‹å…š</a>
</h1>

<h2 id="subtitle-wrap">
<a href="/" id="subtitle">éšæ‰‹ç¬”è®°</a>
</h2>

</div>
<div id="header-inner" class="inner">
<nav id="main-nav">
<a id="main-nav-toggle" class="nav-icon"></a>

<a class="main-nav-link" href="/">é¦–é¡µ</a>

<a class="main-nav-link" href="/archives">å½’æ¡£</a>

<a class="main-nav-link" href="/app">è”ç³»æˆ‘</a>

</nav>
<div id="search-form-wrap">
<div class="search-form"><input type="search" name="wd" class="search-form-input" placeholder="Search" list="search-datalist" autocomplete="false"/></div>

<input type="hidden" id="search-index-file" value="/search.json" />
<div id="search-form-datalist"></div>

</div>
<nav id="sub-nav">

<a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
</nav>
</div>
</div>
</header>
<div class="outer">
<section id="main">


<article id="post-JavaScript-Promise-error-handling" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2021/06/19/JavaScript-Promise-error-handling/" class="article-date">
  <time datetime="2021-06-19T09:34:03.000Z" itemprop="datePublished">2021-06-19</time>
</a>

</div>
<div class="article-inner">


<header class="article-header">
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/19/JavaScript-Promise-error-handling/">JavaScript Promise å¼‚å¸¸æ•è·</a>
    </h1>
  
</header>

<div class="article-entry" itemprop="articleBody">
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">Promise</a> åœ¨å‰ç«¯ç¼–ç¨‹ä¸­ï¼Œè¶Šæ¥è¶Šé¢‘ç¹åœ°è¢«ä½¿ç”¨äº†ã€‚ä½œä¸º <code>ES6</code> çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œ<code>Promise</code> ç°åœ¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise#browser_compatibility" target="_blank" rel="noopener">åŸºæœ¬ä¸Šæ²¡æœ‰å…¼å®¹æ€§é—®é¢˜</a>ï¼ˆé™¤äº† <a href="https://caniuse.com/mdn-javascript_builtins_promise_finally" target="_blank" rel="noopener">Promise.prototype.finally</a>ã€<a href="https://caniuse.com/mdn-javascript_builtins_promise_allsettled" target="_blank" rel="noopener">Promise.allSettled</a>ã€<a href="https://caniuse.com/mdn-javascript_builtins_promise_any" target="_blank" rel="noopener">Promise.any</a> è¿™äº›æ¯”è¾ƒæ–°çš„ APIï¼‰ã€‚è€Œä¸”ï¼Œç°åœ¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noopener">async functions</a> å†™æ³•è¶Šæ¥è¶Šæ™®éï¼Œ<code>Promise</code> ä½œä¸ºå…¶èƒŒåçš„åŸºç¡€åŠŸèƒ½ï¼Œè‡ªç„¶éœ€è¦å„ä½å‰ç«¯æ›´å¥½åœ°æŒæ¡äº†ã€‚</p>
<p>è¿™é‡Œæ¨è <a href="http://www.ruanyifeng.com/home.html" target="_blank" rel="noopener">é˜®ä¸€å³°è€å¸ˆ</a> çš„ <a href="https://es6.ruanyifeng.com/#docs/promise" target="_blank" rel="noopener">ES6 å…¥é—¨</a>ï¼Œç®€æ´æ˜äº†ï¼Œè¿˜ä¸¾ä¾‹è¯´æ˜ï¼ŒåŒæ—¶æ»¡è¶³æ–°æ‰‹å’Œä¸“å®¶ä¸åŒçš„å­¦ä¹ éœ€æ±‚ï¼ğŸ‘ğŸ‘ğŸ‘</p>
<p>å¥½äº†ï¼Œè¿›å…¥ä¸»é¢˜ï¼š<strong>å¦‚ä½•æ•è· JS ä¸­ <code>Promise</code> çš„å¼‚å¸¸ï¼Ÿ</strong></p>
<p>ä¸€èˆ¬ JS ä¸­å¼‚å¸¸æ•è·éƒ½æ˜¯ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/try...catch" target="_blank" rel="noopener">tryâ€¦catch</a> è¯­å¥ï¼Œè€Œ <code>Promise</code> ä¸­å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œä¸€èˆ¬éƒ½æ˜¯ <code>reject()</code>ï¼Œç„¶ååœ¨ <code>Promise</code> é“¾çš„æœ«å°¾ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" target="_blank" rel="noopener">Promise.prototype.catch</a> é‡Œå¤„ç†å¼‚å¸¸ã€‚</p>
<p><img src="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/promises.png" alt="Promise Chain"></p>
<p>ä½† <code>Promise</code> ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally" target="_blank" rel="noopener">Promise.prototype.finally</a> æˆ–è€…ä½¿ç”¨ JS åŸç”Ÿçš„ <code>try...catch</code> è¯­å¥è¾¾åˆ°æŠ›å‡ºå¼‚å¸¸çš„ç›®çš„ã€‚</p>
<h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><p>æ ¹æ® <a href="https://developer.mozilla.org" target="_blank" rel="noopener">MDN</a> çš„æ–‡ç«  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises#common_mistakes" target="_blank" rel="noopener"><fa-link/></a> æ¨èï¼Œä¸€èˆ¬ <code>Promise</code> é“¾çš„æœ€ä½³å®è·µæ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>å†…é“¾è¿”å›æ–°çš„ <code>Promise</code>ï¼›</li>
<li>é¿å…ä¸å¿…è¦çš„åµŒå¥—ï¼›</li>
<li>ä½¿ç”¨ <code>catch</code> ä¸­æ­¢ <code>Promise</code> é“¾ã€‚</li>
</ol>
<p>åä¾‹ ğŸ™ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bad example! Spot 3 mistakes!</span></span><br><span class="line">doSomething().then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  doSomethingElse(result) <span class="comment">// Forgot to return promise from inner chain + unnecessary nesting</span></span><br><span class="line">  .then(<span class="function"><span class="params">newResult</span> =&gt;</span> doThirdThing(newResult));</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> doFourthThing());</span><br><span class="line"><span class="comment">// Forgot to terminate chain with a catch!</span></span><br></pre></td></tr></table></figure>

<p>æ­£ç¡®å§¿åŠ¿ ğŸ™‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">doSomething()</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> doSomethingElse(result);</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">newResult</span> =&gt;</span> doThirdThing(newResult))</span><br><span class="line">.then(<span class="function"><span class="params">()</span> =&gt;</span> doFourthThing())</span><br><span class="line">.catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.error(error));</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" target="_blank" rel="noopener">Promise.prototype.catch</a> å¯ä»¥æ•è· <code>Promise</code> ä¸­æ‰€æœ‰çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ <code>reject</code> æ‰çš„ã€æˆ–è€…æŠ›å‡ºçš„å¼‚å¸¸ï¼›ä»¥ä¸‹ä¸¤ç§å†™æ³•å…¶å®æ˜¯ç­‰æ•ˆçš„ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Whoops!"</span>);</span><br><span class="line">&#125;).catch(alert); <span class="comment">// Error: Whoops!</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Whoops!"</span>));</span><br><span class="line">&#125;).catch(alert); <span class="comment">// Error: Whoops!</span></span><br></pre></td></tr></table></figure></li>
<li>å½“æˆ‘ä»¬æ˜ç¡®çŸ¥é“å“ªé‡Œä¼šå‡ºç°å¼‚å¸¸ï¼ŒçŸ¥é“å¦‚ä½•å¤„ç†å¼‚å¸¸ï¼Œè¯·æ—¶åˆ»ç‰¢è®°ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" target="_blank" rel="noopener">Promise.prototype.catch</a> æ¥æ•è·/åˆ†æ/è®°å½•å¼‚å¸¸ï¼›å¦‚æœæˆ‘ä»¬ä¸çŸ¥é“æ•è·åˆ°çš„å¼‚å¸¸ç§ç±»ï¼ˆæ¯”å¦‚ç¼–ç¨‹é”™åˆ«å­—å¯¼è‡´çš„ï¼‰ï¼Œé‚£å°±é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼›</li>
<li>å½“ç„¶ï¼Œå¦‚æœå‘ç”Ÿäº†æ— æ³•é¢„æ–™åˆ°çš„å¼‚å¸¸ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" target="_blank" rel="noopener">Promise.prototype.catch</a></li>
<li>ä»»ä½•æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ç›‘å¬ <code>unhandledrejection</code> äº‹ä»¶ï¼Œè·Ÿè¸ªæœªæ•è·çš„å¼‚å¸¸å¹¶é€šçŸ¥ç»™ç”¨æˆ·ï¼ˆä¹Ÿå¯èƒ½æ˜¯æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼‰ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬çš„åº”ç”¨æ‰ä¸ä¼šâ€œæ­»â€ã€‚</li>
</ul>
<h3 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h3><ol>
<li><code>reject</code> åªèƒ½ç”¨åœ¨ <code>Promise</code> å›è°ƒå‡½æ•°é‡Œï¼Œè€ŒæŠ›å‡º (<code>throw</code>) å¼‚å¸¸åˆ™å¯ä»¥ä½¿ç”¨åœ¨ä»»ä½• <code>try...catch</code> è¯­å¥æˆ–è€… <code>Promise</code> ä¸­ï¼›</li>
<li><code>reject</code> å¼‚å¸¸ä¹‹åï¼Œæ–¹æ³•å†…çš„å‡½æ•°ä¼šç»§ç»­æ‰§è¡Œï¼Œè€ŒæŠ›å‡º (<code>throw</code>) å¼‚å¸¸åˆ™ä¼šç«‹åˆ»ç»ˆæ­¢æ‰§è¡Œï¼›</li>
<li><code>reject</code> å¯ä»¥ç”¨åœ¨ <code>Promise</code> çš„åŒæ­¥/å¼‚æ­¥å›è°ƒå‡½æ•°é‡Œï¼Œè€ŒæŠ›å‡º (<code>throw</code>) å¼‚å¸¸åªèƒ½ç”¨åœ¨åŒæ­¥å›è°ƒå‡½æ•°é‡Œã€‚</li>
</ol>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li><a href="https://javascript.info/promise-error-handling" target="_blank" rel="noopener">Error handling with promises</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" target="_blank" rel="noopener">Using Promises</a></li>
<li><a href="https://www.geeksforgeeks.org/reject-vs-throw-promises-in-javascript" target="_blank" rel="noopener">Reject Vs Throw Promises in JavaScript</a></li>
</ul>

</div>
<footer class="article-footer">
<a data-url="https://zxs66.github.io/2021/06/19/JavaScript-Promise-error-handling/" data-id="clab8ajsv000v6o8c9fc9bzid" data-title="JavaScript Promise å¼‚å¸¸æ•è·" class="article-share-link">åˆ†äº«</a>


  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/promise/" rel="tag">promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/throw/" rel="tag">throw</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/try-catch/" rel="tag">try...catch</a></li></ul>

</footer>
</div>

</article>



<article id="post-JavaScript-window-print-not-working" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2021/06/09/JavaScript-window-print-not-working/" class="article-date">
  <time datetime="2021-06-09T09:19:13.000Z" itemprop="datePublished">2021-06-09</time>
</a>

</div>
<div class="article-inner">


<header class="article-header">
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/09/JavaScript-window-print-not-working/">JavaScript window.print ä¸èƒ½æ­£å¸¸è°ƒç”¨</a>
    </h1>
  
</header>

<div class="article-entry" itemprop="articleBody">
<p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘éƒ½æ˜¯è°ƒç”¨ <code>window.print</code> æ–¹æ³•å”¤èµ·é¡µé¢æ‰“å°åŠŸèƒ½ï¼ˆè¿™ä¸ªæ–¹æ³•è¿˜å¯ä»¥ç”¨æ¥ä¿å­˜ pdf æ–‡ä»¶ï¼‰ã€‚ä½†æ˜¯ä»Šå¤©å¼€å§‹ï¼Œè¿™ä¸ªæ–¹æ³•ä¸èƒ½ 100% æ­£å¸¸å·¥ä½œäº†ã€‚æˆ‘ä»¥ä¸ºï¼Œåªè¦æˆ‘è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ‰“å°å¯¹è¯æ¡†å°±è·Ÿæˆ‘è°ƒç”¨ <code>window.alert</code> ä¸€æ ·ç«‹é©¬å‡ºæ¥ã€‚ä½†æ˜¯ç°å®å•ªå•ªæ‰“è„¸ï¼Œå®ƒå¹¶æ²¡æœ‰å‡ºæ¥ã€‚</p>
<p>ç½‘ä¸Šæœäº†ä¸€å¤§å †èµ„æ–™ï¼Œå‘ç°é‡åˆ°è¿™ä¸ªé—®é¢˜çš„äººè¿˜ä¸å°‘ã€‚çœ‹æ¥æ˜¯æˆ‘æƒ³å½“ç„¶äº†ã€‚</p>
<p>è¿™é‡Œè®°å½•ä¸€ä¸‹ç»“è®ºï¼ˆå‘ï¼‰ï¼š<strong>é¡µé¢è¿˜å¡åœ¨åŠ è½½èµ„æºçš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½è°ƒç”¨ <code>window.print</code> æ–¹æ³•çš„</strong>ï¼ˆè§å‚è€ƒ <a href="https://stackoverflow.com/questions/18622626/chrome-window-print-print-dialogue-opens-only-after-page-reload-javascript/46051099#46051099" target="_blank" rel="noopener">é“¾æ¥ 1</a>ï¼‰ã€‚</p>
<p>å¯èƒ½ä½ é‡åˆ°çš„é—®é¢˜å’Œæˆ‘çš„è¿˜ä¸å¤ªä¸€æ ·ï¼Œæ›´å¤šå¯èƒ½åŸå› ï¼Œè¯·å‚è€ƒ <a href="https://www.xspdf.com/resolution/51316274.html" target="_blank" rel="noopener">é“¾æ¥ 2</a></p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul>
<li><a href="https://stackoverflow.com/questions/18622626/chrome-window-print-print-dialogue-opens-only-after-page-reload-javascript/46051099#46051099" target="_blank" rel="noopener">Chrome: window.print() print dialogue opens only after page reload (javascript)</a></li>
<li><a href="https://www.xspdf.com/resolution/51316274.html" target="_blank" rel="noopener">Google chrome printing issues 2020</a></li>
</ul>

</div>
<footer class="article-footer">
<a data-url="https://zxs66.github.io/2021/06/09/JavaScript-window-print-not-working/" data-id="clab8ajsu000r6o8c11xxai4p" data-title="JavaScript window.print ä¸èƒ½æ­£å¸¸è°ƒç”¨" class="article-share-link">åˆ†äº«</a>


  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/window-print/" rel="tag">window.print</a></li></ul>

</footer>
</div>

</article>



<article id="post-migrate-data-from-MySQL-to-SQL-Server" class="article article-type-post" itemscope itemprop="blogPost">
<div class="article-meta">
<a href="/2021/06/06/migrate-data-from-MySQL-to-SQL-Server/" class="article-date">
  <time datetime="2021-06-06T02:24:00.000Z" itemprop="datePublished">2021-06-06</time>
</a>

</div>
<div class="article-inner">


<header class="article-header">
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/06/migrate-data-from-MySQL-to-SQL-Server/">ä» MySQL è¿ç§»æ•°æ®è‡³ SQL Server</a>
    </h1>
  
</header>

<div class="article-entry" itemprop="articleBody">
<p>æ•°æ®åº“ä¹‹é—´æ•°æ®åŒæ­¥ï¼Œæ˜¯å¾ˆå¸¸è§çš„åœºæ™¯ã€‚å¯èƒ½å‘ç”Ÿåœ¨ç›¸åŒæœåŠ¡å™¨ä¸åŒæ•°æ®åº“åä¹‹é—´ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿåœ¨ä¸åŒæœåŠ¡å™¨å®ä¾‹ç›¸åŒæ•°æ®åº“ä¹‹é—´ï¼Œè¿˜å¯èƒ½å‘ç”Ÿåœ¨ä¸åŒæœåŠ¡å™¨ä¸åŒæ•°æ®åº“è½¯ä»¶ä¹‹é—´ç­‰ç­‰ã€‚æœ¬ç‰‡æ–‡ç« åªè¦†ç›–ï¼šå¦‚ä½•ä» MySQL è¿ç§»æ•°æ®è‡³ SQL Server ä¸­ã€‚</p>
<p>æˆ‘ç›®å‰ä½¿ç”¨äº†ä¸¤ç§æ–¹æ³•ï¼š</p>
<h3 id="ä½¿ç”¨-Microsoft-SQL-Server-Migration-Assistant-for-MySQL-å·¥å…·"><a href="#ä½¿ç”¨-Microsoft-SQL-Server-Migration-Assistant-for-MySQL-å·¥å…·" class="headerlink" title="ä½¿ç”¨ Microsoft SQL Server Migration Assistant for MySQL å·¥å…·"></a>ä½¿ç”¨ Microsoft SQL Server Migration Assistant for MySQL å·¥å…·</h3><p>è¿™æ˜¯å¾®è½¯å®˜æ–¹å‡ºå“çš„è¿ç§»å·¥å…·ã€‚å¯¹äºé¡¹ç›®å‰æœŸä¸šåŠ¡äººå‘˜è¿›è¡ŒåŸå‹å¿«é€ŸéªŒè¯éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<h5 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h5><ol>
<li>ä¸‹è½½ <a href="https://www.microsoft.com/en-us/download/details.aspx?id=54257" target="_blank" rel="noopener">Microsoft SQL Server Migration Assistant for MySQL</a> ï¼›</li>
<li>åŒå‡» exe æ–‡ä»¶å®‰è£…ï¼›</li>
<li>è¿è¡Œ SSMAï¼š<ol>
<li>è¿æ¥ MySQL</li>
<li>å‹¾é€‰éœ€è¦è¿ç§»çš„è¡¨ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç­‰</li>
<li>è¿æ¥ SQL Server</li>
<li>å‹¾é€‰éœ€è¦è¿ç§»çš„ç›®æ ‡ SQL Server æ•°æ®åº“</li>
<li>å›åˆ°å·¦è¾¹ MySQL Metadata Explorer çª—å£ï¼Œç‚¹å‡»æŒ‰é’® â€œConvert Schemaâ€</li>
<li>å¾…å®Œæˆåï¼Œå³é”® SQL Server æ•°æ®åº“èŠ‚ç‚¹ï¼Œâ€œSynchronize with Databaseâ€</li>
<li>å¾…å®Œæˆåï¼Œç‚¹å‡»â€œMigrate Dataâ€</li>
<li>å®Œæˆã€‚</li>
</ol>
</li>
</ol>
<p>SSMA ç½‘ä¸Šæœ‰å¾ˆå¤šå›¾æ–‡/è§†é¢‘æ•™ç¨‹ï¼Œå„ä½å¯ä»¥è‡ªè¡Œæœç´¢ã€‚æœŸé—´å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>MySQL ODBC Driver ç¼ºå¤±é—®é¢˜ï¼Œå¯ä»¥è‡ªè¡Œå» <a href="https://www.mysql.com/products/connector/" target="_blank" rel="noopener">MySQL å®˜ç½‘ä¸‹è½½</a>ï¼›å¦‚æœè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå¯ä»¥å» SSMA ä¸‹è½½é¡µæ‰¾å®ƒçš„ System Requirementsï¼Œé‡Œé¢ä¼šæåˆ°å…·ä½“çš„ MySQL ODBC Driver ç‰ˆæœ¬å·ï¼Œä¸‹è½½è¿™ä¸€ç‰¹å®šç‰ˆæœ¬å·å°±å¯¹äº†ã€‚</li>
<li>Visual Studio 2019 x64 Redistributable ç»„ä»¶ç¼ºå¤±é—®é¢˜ï¼Œå» <a href="https://support.microsoft.com/en-us/topic/the-latest-supported-visual-c-downloads-2647da03-1eea-4433-9aff-95f26a218cc0" target="_blank" rel="noopener">å¾®è½¯å®˜æ–¹ä¸‹è½½</a> å®‰è£…å³å¯ã€‚</li>
</ul>
<h5 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h5><ol>
<li>é IT äººå£«ä¹Ÿå¯ä»¥ä¸Šæ‰‹ï¼Œä¸ç”¨ç¼–å†™ä»»ä½•ä»£ç ï¼›</li>
</ol>
<h5 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h5><ol>
<li>å‰æœŸç¯å¢ƒå®‰è£…å’Œé…ç½®æ­¥éª¤ç¹çï¼Œå®¹æ˜“å‡ºé”™ï¼›</li>
<li>æ— æ³•è‡ªåŠ¨åŒ–ã€‚</li>
</ol>
<h3 id="åˆ›å»º-SSIS"><a href="#åˆ›å»º-SSIS" class="headerlink" title="åˆ›å»º SSIS"></a>åˆ›å»º SSIS</h3><h5 id="ä½¿ç”¨æ­¥éª¤-1"><a href="#ä½¿ç”¨æ­¥éª¤-1" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h5><p><a href="https://docs.microsoft.com/en-us/sql/integration-services/lesson-1-create-a-project-and-basic-package-with-ssis?view=sql-server-ver15" target="_blank" rel="noopener">å®˜æ–¹å‚è€ƒæ–‡æ¡£</a></p>
<ol>
<li>å®‰è£… MySQL ODBC Connector <a href="https://dev.mysql.com/downloads/connector/odbc/" target="_blank" rel="noopener">ç‚¹æ­¤ä¸‹è½½</a>ï¼›</li>
<li>æ‰“å¼€ Visual Studioï¼Œæ–°å»º Integration Services Projectï¼› </li>
<li>åˆ†åˆ«ä¸º MySQL å’Œ SQL Server æ·»åŠ  Connectionï¼ˆåœ¨ Solution Explorer ä¸­ï¼Œå³é”® Connection Managersï¼ŒNew Connection Managerï¼‰ï¼ŒèŒƒä¾‹å¦‚ä¸‹ï¼š<br><img src="/images/migrate-data-from-MySQL-to-SQL-Server/MySQL-connection-manager.jpg" alt="MySQL Connection Manager"><br><img src="/images/migrate-data-from-MySQL-to-SQL-Server/SQL-Server-connection-manager.jpg" alt="SQL Server Connection Manager"></li>
<li>ä» SSIS Toolbox ä¸­æ‹–å…¥ Execute SQL Task æˆ–è€… Data Flow Taskï¼Œå‰è€…å¯ç”¨äºæ‰§è¡Œ SQL è„šæœ¬æˆ–è€…å­˜å‚¨è¿‡ç¨‹ï¼Œåè€…åˆ™å¯ä»¥æ›´åŠ çµæ´»é…ç½®ï¼›</li>
<li>åŒå‡» Data Flow Task åˆ‡æ¢è‡³ Data Flow è§†å›¾ï¼Œæ·»åŠ ä¸€ä¸ª <code>ADO NET Source</code>ï¼ŒåŒå‡»ç¼–è¾‘ï¼ŒADO.NET Connection Manageré€‰æ‹©åˆšæ‰ç¬¬3æ­¥æ‰€åˆ›å»º MySQL Connection Managerï¼ŒData access mode é€‰æ‹© SQL commandï¼ŒSQL command text å¡«å…¥ SELECT æŸ¥è¯¢è¯­å¥ï¼š<br><img src="/images/migrate-data-from-MySQL-to-SQL-Server/MySQL-ADO.NET-Source.jpg" alt="MySQL Source"></li>
<li>å†æ·»åŠ ä¸€ä¸ª <code>ADO NET Destination</code>ï¼ŒåŒå‡»ç¼–è¾‘ï¼ŒADO.NET Connection Manageré€‰æ‹©åˆšæ‰ç¬¬3æ­¥æ‰€åˆ›å»º SQL Server Connection Managerï¼ŒUse a table or view é€‰æ‹©éœ€è¦æ’å…¥çš„ç›®æ ‡è¡¨ï¼š<br><img src="/images/migrate-data-from-MySQL-to-SQL-Server/SQL-Server-ADO.NET-Source.jpg" alt="SQL Server Destination"></li>
<li>ç‚¹å‡» ADO NET Source è“è‰²ç®­å¤´ï¼Œè¿æ¥è‡³ SQL Server Destinationï¼ˆå½“ç„¶è¿™ä¸­é—´å¯ä»¥åŠ ä¸€äº›å˜æ¢ï¼Œå¯é€‰ï¼‰ï¼›</li>
<li>åˆ‡æ¢å› Control Flowï¼Œä¹Ÿç”¨è“è‰²ç®­å¤´è¿æ¥å„ Execute SQL Task æˆ–è€… Data Flow Taskï¼›</li>
<li>ç¼–è¯‘ã€æœ¬åœ°è°ƒè¯•ä¸€éï¼›</li>
<li>é‚®ä»¶ç‚¹å‡» Project Nameï¼ŒDeployï¼ŒServer Name è¾“å…¥ç›®æ ‡ SQL Server åœ°å€ï¼ŒPath è®¾ç½®å®Œæ¯•ï¼ŒNextï¼ŒDeployï¼Œæ•°ç§’åå®Œæˆï¼›</li>
<li>æ‰“å¼€ SSMS (SQL Server Management Studio)ï¼Œæ‰¾åˆ°å¯¹åº”çš„ Packageï¼Œå³é”® Executeï¼š<br><img src="/images/migrate-data-from-MySQL-to-SQL-Server/execute-SSIS.jpg" alt="Execute SSIS"></li>
<li>ç¨ç­‰ç‰‡åˆ»ï¼Œå³å¯æŸ¥çœ‹è¿è¡Œç»“æœæŠ¥å‘Šã€‚</li>
</ol>
<p>è¯´ä¸€ä¸ªæˆ‘å¼€å‘æ—¶é‡åˆ°çš„å‘å§ï¼šä» MySQL åˆ° SQL Server ç±»å‹è½¬æ¢æ—¶è¯·å‚è€ƒ <a href="https://docs.microsoft.com/en-us/sql/integration-services/data-flow/integration-services-data-types?view=sql-server-ver15" target="_blank" rel="noopener">æ–‡æ¡£</a>ï¼Œä¸€èˆ¬ <code>VARCHAR</code> æˆ–è€… <code>TEXT</code> è¿™äº›ç±»å‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ <code>DateTime</code> éœ€è¦æ³¨æ„ç²¾åº¦é—®é¢˜ã€ç©ºå€¼é—®é¢˜ã€‚ç²¾åº¦ä¸ä¸€è‡´å¯èƒ½ä¼šå¯¼è‡´ç²¾åº¦ä¸¢å¤±ç”šè‡³è¿è¡ŒæŠ¥é”™ã€‚MySQL ä¸­ç©ºæ—¶é—´ä¸º <code>0000-00-00</code>ï¼Œè€Œ SQL Server ä¸­ç©ºæ—¶é—´ä¸º <code>1970-01-01</code>ã€‚</p>
<p>ç½‘ä¸Šè¯´çš„è§£å†³æ–¹æ¡ˆå¾ˆå¤šï¼Œä½†ä¸ä¸€å®šé€‚ç”¨ï¼Œæˆ–è€…ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯ã€‚æˆ‘çš„è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ç¬¬5æ­¥æ—¶ï¼Œå¡«å†™ MySQL Source çš„ SQL command text æ—¶ï¼Œç¨åŠ è°ƒæ•´è„šæœ¬ï¼ŒæŠŠ DATETIME è¿™äº›ç±»å‹çš„æ•°æ®åšä¸ªå˜æ¢ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- approach 1: IF(`fromTime` IS NULL OR `fromTime`='0000-00-00', NULL, DATE_FORMAT(`fromTime`, '%Y-%m-%d')) AS `fromTime`,  -- for nullable date type</span></span><br><span class="line"><span class="comment">-- approach 2: CAST(`list_date` AS CHAR) AS `EY_List_date`,  -- for datetime type</span></span><br><span class="line"><span class="comment">-- approach 3: CAST(`list_date` AS DATE) AS `EY_List_date`,  -- for date type</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¼˜åŠ¿ï¼š"><a href="#ä¼˜åŠ¿ï¼š" class="headerlink" title="ä¼˜åŠ¿ï¼š"></a>ä¼˜åŠ¿ï¼š</h5><ol>
<li>æ€§èƒ½å¿«ï¼›</li>
<li>äººå·¥ä»‹å…¥å°‘ï¼Œä¸æ˜“å‡ºé”™ï¼›</li>
<li>å¯è‡ªåŠ¨åŒ–ï¼ŒSQL Server ä¸­å¯ä»¥ç›´æ¥æŸ¥çœ‹æ¯æ¬¡è¿è¡Œçš„æŠ¥å‘Šã€‚</li>
</ol>
<h5 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h5><ol>
<li>SSIS ä»»åŠ¡<strong>åªèƒ½ä½¿ç”¨ Windows è®¤è¯</strong>ã€‚å‰æœŸç¯å¢ƒé…ç½®éœ€è¦èŠ±è´¹ä¸€å®šæ—¶é—´ï¼›</li>
<li>å¼€å‘ SSIS æ—¶ï¼Œéƒ¨åˆ†æç¤ºä¿¡æ¯ä¸å¤Ÿå‡†ç¡®æ¸…æ™°ï¼›</li>
<li>ç¬¬ä¸€æ¬¡éœ€è¦æ‰‹åŠ¨åŒæ­¥ Schemaï¼Œä»¥åæ¯æ¬¡ Schema æœ‰å˜åŠ¨ï¼ŒSSIS package ä¹Ÿéœ€è¦è·Ÿç€å˜åŠ¨ã€‚</li>
</ol>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><ul>
<li><i class="fa fa-windows" aria-hidden="true"></i> <a href="https://www.microsoft.com/en-us/download/details.aspx?id=54257" target="_blank" rel="noopener">Download Microsoft SQL Server Migration Assistant for MySQL</a></li>
<li><a href="https://dev.mysql.com/downloads/connector/odbc/" target="_blank" rel="noopener">MySQL :: Download Connector/ODBC</a></li>
<li><i class="fa fa-windows" aria-hidden="true"></i> <a href="https://docs.microsoft.com/en-us/sql/integration-services/data-flow/integration-services-data-types?view=sql-server-ver15" target="_blank" rel="noopener">Integration Services Data Types</a></li>
</ul>

</div>
<footer class="article-footer">
<a data-url="https://zxs66.github.io/2021/06/06/migrate-data-from-MySQL-to-SQL-Server/" data-id="clab8ajtd002a6o8c89afax3s" data-title="ä» MySQL è¿ç§»æ•°æ®è‡³ SQL Server" class="article-share-link">åˆ†äº«</a>


  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/etl/" rel="tag">etl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/microsoft-sql-server-migration-assistant-for-mysql/" rel="tag">microsoft sql server migration assistant for mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/migration/" rel="tag">migration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql-server/" rel="tag">sql server</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sql-server-integration-service/" rel="tag">sql server integration service</a></li></ul>

</footer>
</div>

</article>




<nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/8/">&lt; ä¸Šä¸€é¡µ</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/10/">ä¸‹ä¸€é¡µ &gt;</a>
</nav>

<style>
.article {max-height: 123vh;overflow: hidden;position: relative;}
.article.unfold {max-height: initial;}
.article .more {position: absolute;bottom: 0;padding: 3em;cursor: pointer;text-align: center;width: 100%;background: linear-gradient(rgba(0, 0, 0, 0), silver);color: white;box-sizing: border-box;}
.article.unfold .more {display: none;}
</style>
<script>
(function () {
// show more
const moreText = '<i class="fa fa-arrow-circle-down" aria-hidden="true"></i> ' + "æ›´å¤š";
const articles = document.getElementsByClassName('article');
for (let i = 0; i < articles.length; i++) {
const $more = document.createElement('div');
$more.classList.add('more');$more.innerHTML = moreText;
$more.onclick = function (evt) {
const $src = evt.target || evt.srcElement;$src.parentElement.classList.add('unfold');
};
articles[i].appendChild($more);
}})();
</script>
</section>

</div>
<footer id="footer">

<div class="outer"><div id="footer-info" class="inner">&copy; 2022 æ—¶ä»£æ®‹å…š<br>
Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div>
</div></footer>
</div>
<nav id="mobile-nav">

<a href="/" class="mobile-nav-link">home</a>

<a href="/archives" class="mobile-nav-link">archives</a>

<a href="/app" class="mobile-nav-link">contact</a>

</nav>
<!--

<script src="https://cdn.bootcdn.net/ajax/libs/jquery/2.0.3/jquery.min.js" crossorigin="anonymous" integrity="sha256-pXtSQrmprcTB74RsNlFHuJxHK5zXcPrOMx78uWU0ayU&#x3D; sha384-ECTndYny330R2jlSXBiZkdXzAVi0Z&#x2F;iDXJTwV6cp39HECmalqg6+b2sFZFf&#x2F;Y2m6 sha512-epzJ9ms+0Pq+zFMrG1lXVNvjEXgtfKx9iuEWqz3hmbaU2m&#x2F;Dp1pcmpYzuSdDLqX6PMIjzMOyGFwMc+SkgFhMFg&#x3D;&#x3D;"></script>

-->

<script src="/js/script.js" async></script>

</div>
<script>
(function () {
// append image-caption
const images = document.querySelectorAll('article img');
for (let j = 0; j < images.length; j++) {
const $img = images[j];
const altText = $img.getAttribute('alt');
if (altText && altText.length && !$img.classList.contains('inline')) {
const $imgCaption = document.createElement('div');
$imgCaption.classList.add('img-caption');
$imgCaption.innerText = $img.getAttribute('alt');
$img.parentNode.insertBefore($imgCaption, $img.nextSibling);
}}})();
</script>
</body></html>